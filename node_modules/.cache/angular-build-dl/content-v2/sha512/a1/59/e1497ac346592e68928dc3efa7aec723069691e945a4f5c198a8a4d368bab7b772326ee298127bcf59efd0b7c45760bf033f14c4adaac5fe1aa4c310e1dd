{"version":3,"sources":["webpack:///src/app/folder/leave/leave-summary/leave-summary.component.html","webpack:///src/app/folder/leave/leave-routing.module.ts","webpack:///src/app/folder/leave/leave-summary/leave-summary.component.scss","webpack:///src/app/folder/leave/leave-summary/leave-summary.component.ts","webpack:///src/app/folder/leave/leave.module.ts","webpack:///src/app/folder/leave/leave.service.ts"],"names":["routes","path","component","LeaveRoutingModule","imports","forChild","exports","LeaveSummaryComponent","sqlite","leavSer","alertCtrl","translate","locale","enableRequest","leaveRequest","leaveApplied","remFrmSrcArr","events","eventSource","leaveSource","dbEventSource","calendar","mode","currentDate","Date","event","title","startTime","endTime","allDay","modalReady","remSelectedDt","remBackendSelDt","siteId","window","localStorage","getItem","locStorageLang","undefined","lang","setDefaultLang","use","emprecnum","date","firstDay","getFullYear","getMonth","format","lastDay","get","subscribe","value","NALbl","NAmsg","cancelLbl","okLbl","fromLbl","toLbl","cancelLeave","cancelMsg","NAprevdt","greaterDayMsg","getLeaves","empId","fDay","lDay","leaves","res","len","length","i","status","push","fromdate","todate","leaveid","id","myCal","loadEvents","err","console","log","setTimeout","slideNext","slidePrev","viewTitle","ev","selectedTime","dt","toISOString","endDt","nwdt","setDate","getDate","todt","dt_str","toDateString","currDt","newDt","selDt","removed","splice","create","header","subHeader","message","buttons","text","role","handler","data","updateLeave","alert","present","leaveData","EmpId","FromDate","ToDate","Status","siteid","applyLeave","currentDt","start","end","desc","selector","template","createTranslateLoader","http","LeaveModule","declarations","forRoot","loader","provide","useFactory","deps","providers","LeaveService","storage","userId","url","httpOptions","map","Response","handleErrors","post","urlPHP","error","providedIn"],"mappings":"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","file":"leave-leave-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar  class=\\\"toolBar\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{'Leaves'|translate}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content> \\r\\n  <ion-row>\\r\\n    <!-- Move back one screen of the slides -->\\r\\n    <ion-col size=\\\"2\\\">\\r\\n      <ion-button fill=\\\"clear\\\" size=\\\"small\\\" (click)=\\\"back()\\\" class=\\\"iconBtn\\\">\\r\\n        <ion-icon name=\\\"chevron-back-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-col>\\r\\n \\r\\n    <ion-col size=\\\"8\\\" class=\\\"ion-text-center\\\">\\r\\n      <h2 class=\\\"pos\\\">{{ viewTitle }}</h2>\\r\\n    </ion-col>\\r\\n \\r\\n    <!-- Move forward one screen of the slides -->\\r\\n    <ion-col size=\\\"2\\\">\\r\\n      <ion-button fill=\\\"clear\\\" size=\\\"small\\\" (click)=\\\"next()\\\" class=\\\"iconBtn\\\">\\r\\n        <ion-icon name=\\\"chevron-forward-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n \\r\\n  <calendar\\r\\n    [eventSource]=\\\"eventSource\\\"\\r\\n    [calendarMode]=\\\"calendar.mode\\\"\\r\\n    [currentDate]=\\\"calendar.currentDate\\\"\\r\\n    (onTitleChanged)=\\\"onViewTitleChanged($event)\\\"\\r\\n    (onTimeSelected)=\\\"onTimeSelected($event)\\\"\\r\\n    (onEventSelected)=\\\"onEventSelected($event)\\\"\\r\\n    (click)=\\\"applyLeave(calendar.currentDate)\\\"    \\r\\n    id=\\\"cal\\\"\\r\\n  >\\r\\n  </calendar> \\r\\n<br/>\\r\\n  <ion-button color=\\\"primary\\\" (click)=\\\"onSubmit()\\\" class=\\\"leavBtn\\\">\\r\\n    {{'Apply leave'|translate}}\\r\\n  </ion-button>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LeaveSummaryComponent } from './leave-summary/leave-summary.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path:'lea',\r\n    component: LeaveSummaryComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class LeaveRoutingModule { }\r\n","export default \".btnHome {\\n  color: white;\\n  margin-right: 1rem;\\n  font-size: 1.5rem;\\n}\\n\\n.pos {\\n  margin-top: 8px;\\n}\\n\\n.leavBtn {\\n  float: right;\\n  margin-right: 1rem;\\n}\\n\\n.iconBtn {\\n  background-color: #eaf2fe;\\n}\\n\\n:host ::ng-deep .monthview-container {\\n  height: auto !important;\\n}\\n\\n:host ::ng-deep .event-detail-container {\\n  display: none;\\n}\\n\\n.avl {\\n  color: var(--ion-color-danger) !important;\\n  font-size: 0.5rem !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9sZGVyL2xlYXZlL2xlYXZlLXN1bW1hcnkvQzpcXFVzZXJzXFxtYW51bVxcRG93bmxvYWRzXFxmbHVlbnRjZXBUTVMtbWFzdGVyXFxmbHVlbnRjZXBUTVMvc3JjXFxhcHBcXGZvbGRlclxcbGVhdmVcXGxlYXZlLXN1bW1hcnlcXGxlYXZlLXN1bW1hcnkuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2ZvbGRlci9sZWF2ZS9sZWF2ZS1zdW1tYXJ5L2xlYXZlLXN1bW1hcnkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtBQ0NGOztBRENBO0VBQ0UsZUFBQTtBQ0VGOztBREFBO0VBQ0UsWUFBQTtFQUNBLGtCQUFBO0FDR0Y7O0FEREE7RUFDRSx5QkFBQTtBQ0lGOztBREFJO0VBQ0ksdUJBQUE7QUNHUjs7QURBSTtFQUNJLGFBQUE7QUNFUjs7QURDQTtFQUNFLHlDQUFBO0VBQ0EsNEJBQUE7QUNFRiIsImZpbGUiOiJzcmMvYXBwL2ZvbGRlci9sZWF2ZS9sZWF2ZS1zdW1tYXJ5L2xlYXZlLXN1bW1hcnkuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuSG9tZXtcclxuICBjb2xvcjp3aGl0ZTtcclxuICBtYXJnaW4tcmlnaHQ6IDFyZW07XHJcbiAgZm9udC1zaXplOiAxLjVyZW07XHJcbn1cclxuLnBvcyB7XHJcbiAgbWFyZ2luLXRvcDogOHB4O1xyXG59XHJcbi5sZWF2QnRuIHtcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xyXG59XHJcbi5pY29uQnRue1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlYWYyZmU7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCB7XHJcbiAgICAubW9udGh2aWV3LWNvbnRhaW5lciB7XHJcbiAgICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XHJcbiAgICB9XHJcbiBcclxuICAgIC5ldmVudC1kZXRhaWwtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgfVxyXG59XHJcbi5hdmwge1xyXG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKSAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMC41cmVtICFpbXBvcnRhbnQ7XHJcbn0iLCIuYnRuSG9tZSB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xuICBmb250LXNpemU6IDEuNXJlbTtcbn1cblxuLnBvcyB7XG4gIG1hcmdpbi10b3A6IDhweDtcbn1cblxuLmxlYXZCdG4ge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbi1yaWdodDogMXJlbTtcbn1cblxuLmljb25CdG4ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWFmMmZlO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLm1vbnRodmlldy1jb250YWluZXIge1xuICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtcbn1cbjpob3N0IDo6bmctZGVlcCAuZXZlbnQtZGV0YWlsLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5hdmwge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcikgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAwLjVyZW0gIWltcG9ydGFudDtcbn0iXX0= */\";","import { Component, Inject, LOCALE_ID, OnInit, ViewChild } from '@angular/core';\r\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite/ngx'; \r\nimport { LeaveService } from '../leave.service';\r\nimport * as moment from 'moment'; \r\nimport { AlertController } from '@ionic/angular';\r\nimport { CalendarComponent } from 'ionic2-calendar';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-leave-summary',\r\n  templateUrl: './leave-summary.component.html',\r\n  styleUrls: ['./leave-summary.component.scss'],\r\n})\r\nexport class LeaveSummaryComponent implements OnInit {\r\n  lang:any;\r\n  locStorageLang:any;\r\n\r\n  enableRequest = false;\r\n  private database: SQLite;\r\n  conObj: SQLiteObject;\r\n  dbObj: SQLiteObject;\r\n  empId: any;\r\n  leaveList: any;\r\n  reason: any;\r\n  endDate: any;\r\n  startDate: any;\r\n  firstDay: any;\r\n  lastDay: any;\r\n  emprecnum:any;\r\n  leaveRequest:boolean=false;\r\n  leaveApplied:boolean=false;\r\n  // consecutiveLeave:boolean=false;\r\n  remFrmSrcArr:boolean=false;\r\n  events = [];\r\n  currDt:any;\r\n\r\n  eventSource = [];\r\n  leaveSource = [];\r\n  dbEventSource = [];\r\n  viewTitle: string;\r\n  siteId:any;\r\n \r\n  calendar = {\r\n    mode: 'month',\r\n    currentDate: new Date(),\r\n  };\r\n\r\n  event = {\r\n    title: 'Leave Applied',\r\n    startTime: null,\r\n    endTime: '',\r\n    allDay: true\r\n  };\r\n\r\n  leaveData:any;\r\n\r\n  selectedDate: Date;\r\n  modalReady = false;\r\n  remSelectedDt:boolean=false;\r\n  remBackendSelDt:boolean=false;\r\n\r\n  // translated values\r\n  cancelLbl:any;\r\n  cancelLeave:any;\r\n  cancelMsg:any;\r\n  NALbl:any;\r\n  NAmsg:any;\r\n  okLbl:any;\r\n  fromLbl:any;\r\n  toLbl:any;\r\n  NAprevdt:any;\r\n  greaterDayMsg:any;\r\n\r\n\r\n  @ViewChild(CalendarComponent) myCal: CalendarComponent;\r\n\r\n  constructor(private sqlite: SQLite,\r\n              public leavSer: LeaveService,\r\n              private alertCtrl: AlertController,\r\n              public translate: TranslateService,\r\n              @Inject(LOCALE_ID) private locale: string,) \r\n              { \r\n                this.siteId=window.localStorage.getItem('siteId');\r\n                this.locStorageLang=window.localStorage.getItem('lang');\r\n                if(this.locStorageLang == '' || this.locStorageLang == undefined || this.locStorageLang == null){\r\n                  this.lang = 'en';\r\n                  this.translate.setDefaultLang('en');\r\n                  this.translate.use('en');\r\n                }else{\r\n                  this.lang = this.locStorageLang;\r\n                  this.translate.use(this.lang);\r\n                }\r\n                this.emprecnum = window.localStorage.getItem('user2employee');\r\n              }\r\n\r\n  ngOnInit() {\r\n    this.leaveSource=[];\r\n    let date = new Date(); \r\n    this.firstDay =  moment(new Date(date.getFullYear(), date.getMonth(), 1)).format('YYYY-MM-DD'); \r\n    this.lastDay = moment(new Date(date.getFullYear(), date.getMonth() + 1, 0)).format('YYYY-MM-DD'); \r\n\r\n    // language\r\n    this.translate.get('Not Allowed').subscribe(value => { this.NALbl = value; });\r\n    this.translate.get('NALeave').subscribe(value => { this.NAmsg = value; });\r\n    this.translate.get('Cancel').subscribe(value => { this.cancelLbl = value; });\r\n    this.translate.get('Ok').subscribe(value => { this.okLbl = value; });\r\n    this.translate.get('From').subscribe(value => { this.fromLbl = value; });\r\n    this.translate.get('To').subscribe(value => { this.toLbl = value; });\r\n    this.translate.get('Cancel Leave').subscribe(value => { this.cancelLeave = value; });\r\n    this.translate.get('Cancel Msg').subscribe(value => { this.cancelMsg = value; });\r\n    this.translate.get('Not Allowed').subscribe(value => { this.NAprevdt = value; });\r\n    this.translate.get('Greater than today').subscribe(value => { this.greaterDayMsg = value; });\r\n\r\n    this.getLeaves();\r\n  }\r\n\r\n  getLeaves() {\r\n    this.events=[];\r\n    this.dbEventSource=[];\r\n    this.empId = window.localStorage.getItem('user2employee');\r\n    let fDay = moment(this.firstDay).format('YYYY-MM-DD'); \r\n    let lDay = moment(this.lastDay).format('YYYY-MM-DD'); \r\n    this.leavSer.leaves(this.empId, fDay, lDay).subscribe(res=>{\r\n      if(res['data']){\r\n        let len = res['data'].length;\r\n        for(let i=0; i<len; i++){\r\n          if(res['data'][i].status == 1 || res['data'][i].status == 0){\r\n            this.events.push({\r\n              title: res['data'][i].status,\r\n              startTime: new Date(res['data'][i].fromdate),\r\n              endTime: new Date(res['data'][i].todate),\r\n              allDay: true,\r\n              leaveid:res['data'][i].id,\r\n              status:res['data'][i].status\r\n            });\r\n          }\r\n        }\r\n        this.dbEventSource = this.events;\r\n        this.eventSource = this.events;\r\n        this.myCal.loadEvents();\r\n      }\r\n    },err=>{\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      this.modalReady = true;    \r\n    }, 0);\r\n  }\r\n   // Change current month/week/day\r\n   next() {\r\n    this.myCal.slideNext();\r\n    this.getLeaves();\r\n  }\r\n \r\n  back() {\r\n    this.myCal.slidePrev();\r\n    this.getLeaves();\r\n  }\r\n \r\n  // Selected date reange and hence title changed\r\n  onViewTitleChanged(title) {\r\n    this.viewTitle = title;\r\n  }\r\n  \r\n  async onTimeSelected(ev) {   \r\n    this.event.startTime = new Date(ev.selectedTime);\r\n\r\n    let dt = this.event.startTime.toISOString();\r\n    let endDt = this.event.startTime;\r\n    endDt=new Date(endDt);\r\n    let nwdt = endDt.setDate(endDt.getDate());\r\n    let todt = new Date(nwdt).toISOString();\r\n    let dt_str = this.event.startTime.toDateString();\r\n\r\n    if(this.leaveRequest == true && this.event.startTime >= this.currDt){\r\n      //To avoid applying leaves on consecutive days.\r\n      // for(let i=0; i<this.eventSource.length; i++){\r\n      //   let d1 = moment(this.eventSource[i].startTime.toLocaleDateString());\r\n      //   let d2 = moment(this.event.startTime.toLocaleDateString());\r\n      //   let diffDays = d2.diff(d1, 'days');\r\n      //   if((diffDays == 1 || diffDays == -1) && this.consecutiveLeave==false){\r\n      //     this.consecutiveLeave=true;\r\n      //     let alert = await this.alertCtrl.create({\r\n      //       header: this.NALbl,\r\n      //       message: this.NAmsg,\r\n      //       buttons: [\r\n      //         {\r\n      //           text: this.okLbl,\r\n      //           role: 'cancel',\r\n      //           handler: () => {\r\n      //             this.leaveRequest=false;\r\n      //           }\r\n      //         }\r\n      //       ]\r\n      //     });\r\n      //     alert.present();\r\n      //   }\r\n      // }\r\n      //end of consecutive day leaves\r\n\r\n      // to remove from source array which is for insert purpose\r\n      for(let i=0; i<this.leaveSource.length; i++){\r\n        let newDt = this.leaveSource[i].date.toDateString();\r\n        let selDt = this.event.startTime.toDateString();\r\n        if(newDt === selDt){\r\n          var removed = this.leaveSource.splice(i, 1); \r\n          this.remSelectedDt=true;\r\n          this.remFrmSrcArr=true;  \r\n          this.myCal.loadEvents();\r\n        }\r\n      }\r\n\r\n      if(this.remFrmSrcArr){\r\n        // to remove from main src array which is for insert purpose\r\n        for(let i=0; i<this.eventSource.length; i++){\r\n          let newDt = this.eventSource[i].startTime.toDateString();\r\n          let selDt = this.event.startTime.toDateString();\r\n          if((newDt === selDt) && (this.eventSource[i].title==12)){\r\n            let removed = this.eventSource.splice(i, 1); \r\n            this.remSelectedDt=true;\r\n            this.remFrmSrcArr=true;            \r\n            this.myCal.loadEvents();\r\n          }\r\n        }\r\n      }\r\n      // end of selected array\r\n\r\n      // to remove from dbEventsource(leaves list from backend)\r\n      for(let i=0; i<this.dbEventSource.length; i++){\r\n        let newDt = this.dbEventSource[i].startTime.toDateString();\r\n        let selDt = this.event.startTime.toDateString();\r\n        if(newDt === selDt){\r\n          if((this.dbEventSource[i].status == 0)&&(this.remBackendSelDt==false)){\r\n            let alert = await this.alertCtrl.create({\r\n              header: this.cancelLeave,\r\n              subHeader:this.cancelMsg,\r\n              message: this.dbEventSource[i].startTime.toDateString(),\r\n              buttons: [\r\n                {\r\n                  text: this.okLbl,\r\n                  role: 'cancel',\r\n                  handler: () => {\r\n                  }\r\n                },\r\n                {\r\n                  text: this.cancelLeave,\r\n                  handler: data => {\r\n                    this.leavSer.updateLeave(this.dbEventSource[i].leaveid).subscribe(res=>{\r\n                      if(res['data'] == 'Success'){\r\n                        this.getLeaves();\r\n                      }\r\n                    },err=>{\r\n                      // console.log(err)\r\n                    });  \r\n                    this.leaveRequest=false; \r\n                  }\r\n                }\r\n              ]\r\n            });\r\n            alert.present();\r\n          }\r\n          this.remBackendSelDt=true;\r\n        }\r\n      }\r\n      // && !this.consecutiveLeave\r\n      if(!this.remSelectedDt && (this.remBackendSelDt==false)){\r\n        this.events.push({\r\n          title: 12,\r\n          startTime: new Date(this.event.startTime),\r\n          endTime: new Date(this.event.startTime),\r\n          allDay: true,\r\n          leaveid:null,\r\n          status:0\r\n        });\r\n  \r\n        this.leaveData={\r\n          EmpId:this.emprecnum,\r\n          FromDate:dt,\r\n          ToDate:todt,\r\n          Status:0,\r\n          date:this.event.startTime,\r\n          siteid:this.siteId\r\n        }\r\n        this.leaveSource.push(this.leaveData);\r\n        this.eventSource = this.events;\r\n        this.leaveRequest=false;\r\n        this.myCal.loadEvents();\r\n      }\r\n      // console.log(this.leaveSource);\r\n    }else {\r\n      if(this.leaveRequest == true){\r\n        const alert = await this.alertCtrl.create({\r\n          header: this.NAprevdt,\r\n          message: this.greaterDayMsg ,\r\n          buttons: [this.okLbl],\r\n        });\r\n        alert.present();\r\n  \r\n      }\r\n    }\r\n  }\r\n  onSubmit(){\r\n    for(let i=0; i<this.leaveSource.length; i++){\r\n      this.leavSer.applyLeave(this.leaveSource[i]).subscribe(res=>{\r\n        if(res['data'] == \"requested\"){\r\n          this.getLeaves();\r\n        }\r\n      },err=>{\r\n        console.log(err)\r\n      });\r\n    }\r\n    this.myCal.loadEvents();\r\n    this.leaveSource=[];\r\n  }\r\n\r\n  applyLeave(currentDt){\r\n      this.leaveRequest=true;\r\n      this.leaveApplied=false;\r\n      this.currDt=currentDt;\r\n\r\n      this.remSelectedDt=false;\r\n      // this.consecutiveLeave=false;\r\n      this.remBackendSelDt=false;\r\n      this.remFrmSrcArr=false; \r\n  }\r\n\r\n  // Calendar event was clicked\r\n  async onEventSelected(event) {\r\n    // Use Angular date pipe for conversion\r\n    let start= new Date(event.startTime);\r\n    let end=new Date(event.endTime);\r\n \r\n    const alert = await this.alertCtrl.create({\r\n      header: event.title,\r\n      subHeader: event.desc,\r\n      message: this.fromLbl+': ' + start + '<br><br>'+this.toLbl+': ' + end,\r\n      buttons: [this.okLbl],\r\n    });\r\n    alert.present();\r\n  }  \r\n}","import { LOCALE_ID, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { LeaveRoutingModule } from './leave-routing.module';\r\nimport { LeaveSummaryComponent } from './leave-summary/leave-summary.component';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgCalendarModule } from 'ionic2-calendar';\r\n\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { registerLocaleData } from '@angular/common';\r\n// import localeZh from '@angular/common/locales/zh-Hans';\r\n\r\n// registerLocaleData(localeZh);\r\n\r\nexport function createTranslateLoader(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n\r\n@NgModule({\r\n  declarations: [LeaveSummaryComponent],\r\n  imports: [\r\n    CommonModule,\r\n    LeaveRoutingModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgCalendarModule,\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: createTranslateLoader,\r\n        deps: [HttpClient]\r\n      }\r\n    })\r\n  ],\r\n  providers: [\r\n    // { \r\n      // provide: LOCALE_ID, \r\n      // useValue: 'zh-Hans' \r\n    // }\r\n  ]\r\n})\r\nexport class LeaveModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport 'rxjs/add/operator/map'; \r\nimport 'rxjs/add/operator/catch';\r\nimport 'rxjs/add/observable/throw';\r\nimport 'rxjs/Observable';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LeaveService {\r\n  token: string;\r\n  userId:any;\r\n  emprecnum:any;\r\n  httpOptions: { headers: HttpHeaders; };\r\n\r\n   constructor(private http: HttpClient,\r\n    private storage: Storage,\r\n    ) {\r\n      this.userId=window.localStorage.getItem('userId');\r\n      this.emprecnum=window.localStorage.getItem('user2employee');\r\n  }\r\n\r\n\r\n leaveSummary(userId){\r\n   return this.http.get(environment.url + 'attendance/getmyleaverequests' + '?userid=' + userId, this.httpOptions)\r\n   .map(Response =>\r\n    {return Response}).catch(this.handleErrors);\r\n }\r\n\r\n applyLeave(data){\r\n  return this.http.post(environment.urlPHP + 'attendance/applyleave', data, this.httpOptions)\r\n  .map(Response =>\r\n   {return Response}).catch(this.handleErrors);\r\n }\r\n updateLeave(leaveid){\r\n  return this.http.get(environment.urlPHP + 'employee/updateLeave/' + this.userId +'/' + leaveid, this.httpOptions)\r\n  .map(Response =>\r\n    {return Response}).catch(this.handleErrors);\r\n\r\n }\r\n\r\n leaves(empId, firstDay, lastDay){\r\n  return this.http.get(environment.urlPHP + 'attendance/get_leaves/' + empId +'/' + firstDay+ '/'+lastDay, this.httpOptions)\r\n  .map(Response =>\r\n    {return Response}).catch(this.handleErrors);\r\n }\r\n \r\n\r\n  private handleErrors (error: Response | any) {\r\n    console.log(error.error.message)\r\n    return Observable.throw(error.error.message || 'backend server error');\r\n  }\r\n}\r\n\r\n"]}